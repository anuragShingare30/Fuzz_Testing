// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import { Test, console } from "lib/forge-std/src/Test.sol";
import "lib/forge-std/src/Vm.sol";
import { StatefulFuzzOpen } from "src/StatefulFuzzOpen.sol";
import {StdInvariant} from "lib/forge-std/src/StdInvariant.sol";

contract StatefulFuzzOpenTest is StdInvariant, Test {
    StatefulFuzzOpen public sfc;

    function setUp() public {
        sfc = new StatefulFuzzOpen();
        targetContract(address(sfc));
    }

    // Stateless fuzz, doesn't work
    function testFuzzPassesEasyInvariant(uint128 randomNumber) public {
        sfc.doMoreMathAgain(randomNumber);
        assert(sfc.storedValue() != 0);
    }

    // Stateful fuzz
    // For fuzz test use `invariant_` or `statefulFuzz_`
    function statefulFuzz_testMathDoesntReturnZero() public view {
        assert(sfc.storedValue() != 0);
    }
}